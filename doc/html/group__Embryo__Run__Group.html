<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
            "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
 <head>
  <title>Embryo: Program Run Functions</title>
  <link href="e.css" rel="stylesheet" type="text/css" />
 </head>

<body>
 <table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
   <td class="t" width="50%" valign="top" align="left">
     <table width="100px" height="100px" border="0" cellpadding="0" cellspacing="0">
     <tr><td class="lnav"><a class="nav" href="http://web.enlightenment.org/p.php?p=index">Home</a></td></tr>
     <tr><td class="lnav"><a class="nav" href="http://web.enlightenment.org/p.php?p=news">News</a></td></tr>
     <tr><td class="lnav"><a class="nav" href="http://web.enlightenment.org/p.php?p=about">About</a></td></tr>
     <tr><td class="rnav"><a class="nav" href="http://web.enlightenment.org/p.php?p=download">Download</a></td></tr>
    </table>
   </td>
   <td class="tl" width="612" height="250" valign="bottom" align="center">
    <img src="_.gif" width="612" height="1" />
    <table border="0" cellpadding="0" cellspacing="4px">
     <tr>
      <td class='nav'><a class='nav' href="index.html">Main&nbsp;Page</a></td>
      <td class='nav'><a class='nav' href="modules.html">Modules</a></td>
      <td class='nav'><a class='nav' href="Embryo_8h.html">API Reference</a></td>
      <td class="nav"><a class="nav" href="pages.html">Related Pages</a></td>
     </tr>
    </table>
    <hr />
   </td>
   <td class="t" width="50%" valign="top" align="right">
    <table width="100px" height="100px" border="0" cellpadding="0" cellspacing="0">
     <tr><td class="rnav"><a class="nav" href="http://web.enlightenment.org/p.php?p=support">Support</a></td></tr>
     <tr><td class="lnav"><a class="nav" href="http://web.enlightenment.org/p.php?p=contribute">Contribute</a></td></tr>
     <tr><td class="lnav"><a class="nav" href="http://web.enlightenment.org/p.php?p=contact">Contact</a></td></tr>
     <tr><td class="lnav"><a class="nav" href="http://trac.enlightenment.org/e">Tracker</a></td></tr>
    </table>
   </td>
  </tr>
 </table>

 <div class="main">
<!-- Generated by Doxygen 1.5.5 -->
<div class="contents">
<h1>Program Run Functions</h1>Functions that are involved in actually running functions in an Embryo program.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">EAPI int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Embryo__Run__Group.html#g4497fa4413a00d7f482772cdc6f7309d">embryo_program_recursion_get</a> (Embryo_Program *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of virtual machines are running for the given program.  <a href="#g4497fa4413a00d7f482772cdc6f7309d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">EAPI int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Embryo__Run__Group.html#ga061469476a430fd33e89951300fd62a">embryo_program_run</a> (Embryo_Program *ep, Embryo_Function fn)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Runs the given function of the given Embryo program in the current virtual machine.  <a href="#ga061469476a430fd33e89951300fd62a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">EAPI Embryo_Cell&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Embryo__Run__Group.html#g91a7c05bafd22e94d776a117a297201d">embryo_program_return_value_get</a> (Embryo_Program *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retreives the return value of the last called function of the given program.  <a href="#g91a7c05bafd22e94d776a117a297201d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">EAPI void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Embryo__Run__Group.html#g493d2e507082b46cdbc57708a1f6e239">embryo_program_max_cycle_run_set</a> (Embryo_Program *ep, int max)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the maximum number of abstract machine cycles any given program run can execute before being put to sleep and returning.  <a href="#g493d2e507082b46cdbc57708a1f6e239"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">EAPI int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Embryo__Run__Group.html#g2bf3e76b53faadccc60c11093c795425">embryo_program_max_cycle_run_get</a> (Embryo_Program *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retreives the maximum number of abstract machine cycles a program is allowed to run.  <a href="#g2bf3e76b53faadccc60c11093c795425"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Functions that are involved in actually running functions in an Embryo program. 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g2bf3e76b53faadccc60c11093c795425"></a><!-- doxytag: member="embryo_amx.c::embryo_program_max_cycle_run_get" ref="g2bf3e76b53faadccc60c11093c795425" args="(Embryo_Program *ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EAPI int embryo_program_max_cycle_run_get           </td>
          <td>(</td>
          <td class="paramtype">Embryo_Program *&nbsp;</td>
          <td class="paramname"> <em>ep</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retreives the maximum number of abstract machine cycles a program is allowed to run. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The given program. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The number of cycles a run cycle is allowed to run for this program.</dd></dl>
This returns the value set by <a class="el" href="group__Embryo__Run__Group.html#g493d2e507082b46cdbc57708a1f6e239" title="Sets the maximum number of abstract machine cycles any given program run can execute...">embryo_program_max_cycle_run_set()</a>. See <a class="el" href="group__Embryo__Run__Group.html#g493d2e507082b46cdbc57708a1f6e239" title="Sets the maximum number of abstract machine cycles any given program run can execute...">embryo_program_max_cycle_run_set()</a> for more information. 
</div>
</div><p>
<a class="anchor" name="g493d2e507082b46cdbc57708a1f6e239"></a><!-- doxytag: member="embryo_amx.c::embryo_program_max_cycle_run_set" ref="g493d2e507082b46cdbc57708a1f6e239" args="(Embryo_Program *ep, int max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EAPI void embryo_program_max_cycle_run_set           </td>
          <td>(</td>
          <td class="paramtype">Embryo_Program *&nbsp;</td>
          <td class="paramname"> <em>ep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>max</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the maximum number of abstract machine cycles any given program run can execute before being put to sleep and returning. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The given program. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max</em>&nbsp;</td><td>The number of machine cycles as a limit.</td></tr>
  </table>
</dl>
This sets the maximum number of abstract machine (virtual machine) instructions that a single run of an embryo function (even if its main) can use before embryo <a class="el" href="group__Embryo__Run__Group.html#ga061469476a430fd33e89951300fd62a" title="Runs the given function of the given Embryo program in the current virtual machine...">embryo_program_run()</a> reutrns with the value EMBRYO_PROGRAM_TOOLONG. If the function fully executes within this number of cycles, <a class="el" href="group__Embryo__Run__Group.html#ga061469476a430fd33e89951300fd62a" title="Runs the given function of the given Embryo program in the current virtual machine...">embryo_program_run()</a> will return as normal with either EMBRYO_PROGRAM_OK, EMBRYO_PROGRAM_FAIL or EMBRYO_PROGRAM_SLEEP. If the run exceeds this instruction count, then EMBRYO_PROGRAM_TOOLONG will be returned indicating the program exceeded its run count. If the app wishes to continue running this anyway - it is free to process its own events or whatever it wants and continue the function by calling embryo_program_run(program, EMBRYO_FUNCTION_CONT); which will start the run again until the instruction count is reached. This can keep being done to allow the calling program to still be able to control things outside the embryo function being called. If the maximum run cycle count is 0 then the program is allowed to run forever only returning when it is done.<p>
It is important to note that abstract machine cycles are NOT the same as the host machine cpu cycles. They are not fixed in runtime per cycle, so this is more of a helper tool than a way to HARD-FORCE a script to only run for a specific period of time. If the cycle count is set to something low like 5000 or 1000, then every 1000 (or 5000) cycles control will be returned to the calling process where it can check a timer to see if a physical runtime limit has been elapsed and then abort runing further assuming a "runaway script" or keep continuing the script run. This limits resolution to only that many cycles which do not take a determined amount of time to execute, as this varies from cpu to cpu and also depends on how loaded the system is. Making the max cycle run too low will impact performance requiring the abstract machine to do setup and teardown cycles too often comapred to cycles actually executed.<p>
Also note it does NOT include nested abstract machines. IF this abstract machine run calls embryo script that calls a native function that in turn calls more embryo script, then the 2nd (and so on) levels are not included in this run count. They can set their own max instruction count values separately.<p>
The default max cycle run value is 0 in any program until set with this function. 
</div>
</div><p>
<a class="anchor" name="g4497fa4413a00d7f482772cdc6f7309d"></a><!-- doxytag: member="embryo_amx.c::embryo_program_recursion_get" ref="g4497fa4413a00d7f482772cdc6f7309d" args="(Embryo_Program *ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EAPI int embryo_program_recursion_get           </td>
          <td>(</td>
          <td class="paramtype">Embryo_Program *&nbsp;</td>
          <td class="paramname"> <em>ep</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the number of virtual machines are running for the given program. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The given program. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The number of virtual machines running. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g91a7c05bafd22e94d776a117a297201d"></a><!-- doxytag: member="embryo_amx.c::embryo_program_return_value_get" ref="g91a7c05bafd22e94d776a117a297201d" args="(Embryo_Program *ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EAPI Embryo_Cell embryo_program_return_value_get           </td>
          <td>(</td>
          <td class="paramtype">Embryo_Program *&nbsp;</td>
          <td class="paramname"> <em>ep</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retreives the return value of the last called function of the given program. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The given program. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>An Embryo_Cell representing the return value of the function that was last called. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ga061469476a430fd33e89951300fd62a"></a><!-- doxytag: member="embryo_amx.c::embryo_program_run" ref="ga061469476a430fd33e89951300fd62a" args="(Embryo_Program *ep, Embryo_Function fn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EAPI int embryo_program_run           </td>
          <td>(</td>
          <td class="paramtype">Embryo_Program *&nbsp;</td>
          <td class="paramname"> <em>ep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Embryo_Function&nbsp;</td>
          <td class="paramname"> <em>fn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Runs the given function of the given Embryo program in the current virtual machine. 
<p>
The parameter <code>fn</code> can be found using <a class="el" href="group__Embryo__Func__Group.html#g8da497a811da37c0396eeeb6b9331679">embryo_program_function_find</a>.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>For Embryo to be able to run a function, it must have been declared <code>public</code> in the Small source code.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The given program. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fn</em>&nbsp;</td><td>The given function. Normally "main", in which case the constant <code>EMBRYO_FUNCTION_MAIN</code> can be used. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><code>EMBRYO_PROGRAM_OK</code> on success. <code>EMBRYO_PROGRAM_SLEEP</code> if the program is halted by the Small <code>sleep</code> call. <code>EMBRYO_PROGRAM_FAIL</code> if there is an error. <code>EMBRYO_PROGRAM_TOOLONG</code> if the program executes for longer than it is allowed to in abstract machine instruction count. </dd></dl>

<p>References <a class="el" href="Embryo_8h-source.html#l00070">EMBRYO_CELL_NONE</a>, <a class="el" href="embryo__amx_8c-source.html#l00920">embryo_data_address_get()</a>, <a class="el" href="embryo__amx_8c-source.html#l00950">embryo_data_heap_push()</a>, <a class="el" href="embryo__amx_8c-source.html#l00871">embryo_data_string_set()</a>, <a class="el" href="Embryo_8h-source.html#l00042">EMBRYO_ERROR_BOUNDS</a>, <a class="el" href="Embryo_8h-source.html#l00049">EMBRYO_ERROR_DIVIDE</a>, <a class="el" href="Embryo_8h-source.html#l00046">EMBRYO_ERROR_HEAPLOW</a>, <a class="el" href="Embryo_8h-source.html#l00056">EMBRYO_ERROR_INDEX</a>, <a class="el" href="Embryo_8h-source.html#l00058">EMBRYO_ERROR_INIT</a>, <a class="el" href="Embryo_8h-source.html#l00044">EMBRYO_ERROR_INVINSTR</a>, <a class="el" href="Embryo_8h-source.html#l00043">EMBRYO_ERROR_MEMACCESS</a>, <a class="el" href="Embryo_8h-source.html#l00050">EMBRYO_ERROR_SLEEP</a>, <a class="el" href="Embryo_8h-source.html#l00068">EMBRYO_FUNCTION_CONT</a>, <a class="el" href="Embryo_8h-source.html#l00067">EMBRYO_FUNCTION_MAIN</a>, <a class="el" href="Embryo_8h-source.html#l00076">EMBRYO_PROGRAM_FAIL</a>, <a class="el" href="Embryo_8h-source.html#l00072">EMBRYO_PROGRAM_OK</a>, and <a class="el" href="Embryo_8h-source.html#l00073">EMBRYO_PROGRAM_SLEEP</a>.</p>

</div>
</div><p>
</div>
  </div>
  <hr />
  <p class="tiny">Copyright &copy; Enlightenment.org</p>
  <p class="tiny">Embryo Documentation Generated: Mon May 19 09:42:59 2008</p>
 </body>
</html>
